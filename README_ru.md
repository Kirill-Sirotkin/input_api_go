# IO Bound Task API

[ReadMe in English](README.md)

## Описание

Этот проект включает в себя простой пример API сервера для запуска IO-bound или вычислительно тяжелых задач и поллинга хранилища данных для проверки прогресса задачи.

## Технические особенности

- Простой API. Доступны двe конечных точки (эндпоинта): POST для создания новой задачи и GET для запроса статуса задачи по ID
- Обработка задачи при помощи goroutine (горутина). Горутины позволяют обрабатывать задачи неблокирующим и независящим от API запроса способом

## Диаграмма рабочего процесса

![Диаграмма рабочего процесса](./system_diagram.png)

Сервер предоставляет два эндпоинта:
| Эндпоинт | Описание |
|----------|----------|
|`POST /create-task` |Сервер ожидает json объект { "name": "sample_name" } в теле запроса. Это создает первичную запись о задаче в хранилище данных с статусом "pending".<br><br>Сервер сразу же возвращает новую запись о задаче, что завершает API запрос.<br><br>Затем запускается горутина, которая выполняет обработку. После выполнения, горутина обновляет статус задачи на "completed".|
|`GET /poll-task/:id` |В любое время можно отправить на сервер запрос на информацию о статусе задачи. Если задача с данным ID существует, сервер вернет полную запись из хранилища.<br><br>Во время обработки задачи ее статус - "pending", после обработки - "completed".<br><br>Клиент может использовать эту информацию или реализовывать стратегию поллинга любым удобным способом.|

Архитектура этого решения может быть легко расширена в дальнейшем созданием новых POST-GET пар эндпоинтов для любых новых типов задач.

Кроме того, взаимодействие сервера и клиента не сопряжено с обработкой задач, что упрощает рефакторинг и расширение логики обработки.

По требованиям проекта, хранилище данных выполнено в памяти сервера и представляет собой струкуру map, защищенную RWMutex во избежание ошибок с конкурентными процессами. Однако, инфраструктура любой базы данных может быть добавлена для хранения данных о задачах.

### Документация

Для упрощения написания API, в проекте используются две зависимости: [Echo](https://pkg.go.dev/github.com/labstack/echo/v4#section-readme) (для настройки эндпоинтов) и [uuid](https://pkg.go.dev/github.com/google/uuid) (для генерации уникальных идентификаторов задач)

Начните с запуска команды `go mod tidy` для установки необходимых зависимостей.
Чтобы сразу запустить сервер, используйте `go run .` в корне проекта. 

Также, можно скомпилировать исполнительный файл при помощи `go build -o main.exe .`. После этого, запустите созданный `main.exe` файл.